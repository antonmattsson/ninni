
*** How to import datasets into Ninni's database *** 


1:
All the datasets you wish to import to Ninni's database should be in .csv files with the following columns:

VARIABLE1_LABEL: The label ofthe first variable
VARIABLE2_LABEL: The label of the second variable (exclude this column if the dataset has only one variable)
EFFECT
EFFECT_L95
EFFECT_U95
N
P
P_FDR

Example: study1.csv

VARIABLE1_LABEL,VARIABLE2_LABEL,EFFECT,EFFECT_L95,EFFECT_U95,N,P,P_FDR
ABCD,TP53,8,5,10,100,0.01,1




2:
You can add a .csv file describing the variables.
If this file is not specified for the dataset, variable description is set to be the same as the variable label. 
The file should have the following columns:

LABEL: The variable label, same as in the previous csv file
DESCRIPTION: Description of the variable

Example: study1_variables.csv:

LABEL,DESCRIPTION
ABCD,Best known gene to man-kind
TP53,Cancer gene




3:
The datasets should be listed in a tab-delimited .txt file with the following columns:

- DATASET_FILENAME: the name of the .csv file containing the dataset
- VARIABLES FILENAME: optional file describing the variables
- LABEL: short label for the dataset
- DESCRIPTION: longer description of the dataset
- VARNUM: number of variables in the dataset
- EFFECT_TYPE: The effect type in the dataset: "OR" for odds-ratio, "FC" for fold-change or "CORR" for correlation
- METADATA_LABELS: possible metadata labels for the dataset

Example: datasets.txt:

DATASET_FILENAME	VARIABLES_FILENAME	LABEL	DESCRIPTION	VARNUM	EFFECT_TYPE	METADATA_LABELS
study1.csv	study1_variables.txt	DRUG_STUDY1	Drug interaction study, using mortality as outcome	2	OR	DRUG_INTERACTION;MALES;T2D




4:
Metadata of dataasets should be described in a separate tab-delimited .txt file with the following columns:

LABEL: The metadata label, same as in the previous .txt file
DESCRIPTION: Description of the metadata tag


Example: metadata.txt

LABEL	DESCRIPTION
DRUG_INTERACTION	Drug interaction study
MALE	Only males
T2D	Type 2 Diabetes




5:
When all the files are in the right format, you can import the datasets using import_data.py script located in the /src repository.
The script requires two command line parameters:

-dsf 	gives the file listing the datasets (see section 3)
-mdf 	gives the metadata file (see section 4)

All the data is imported in the database as a single bulk.



Example:

- The datasets are stored in /data repository as .csv files
- The .csv files are listed in datasets.txt file
- The repository also contains the metadata.txt file

- Now, the following command imports the datasets into Ninni's database:

$ python src/import_data.py -dsf data/datasets.txt -mdf data/metadata.txt